server {
  listen 80;
  server_name localhost;

  root /usr/share/nginx/html;
  index index.html;

  # Basic metrics endpoint for frontend monitoring
  location /metrics {
    access_log off;
    return 200 "# HELP nginx_up Nginx status
# TYPE nginx_up gauge
nginx_up 1
# HELP http_requests_total Total HTTP requests served by nginx
# TYPE http_requests_total counter
http_requests_total{service=\"todo-frontend\",status=\"200\"} 1
";
    add_header Content-Type text/plain;
  }

  location / {
    # If the file isn't found on disk, fallback to index.html so React can handle routing
    try_files $uri /index.html;
  }
}
